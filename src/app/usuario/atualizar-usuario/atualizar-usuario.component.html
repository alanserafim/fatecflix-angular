<body >
  <div class="content">
    <app-header id="header"></app-header>
    <mat-card id="conteudo">
      <mat-card-title>Atualizar ou deletar dados</mat-card-title>
      <mat-card-subtitle>Formul√°rio</mat-card-subtitle>
      <div [hidden]="submitted" style="width: 400px">
        <form (ngSubmit)="onSubmit()">
          <div class="form-group">
            <mat-form-field>
            <mat-label for="name">Nome</mat-label>
            <input
              matInput
              type="text"
              class="form-control"
              id="name"
              required
              [(ngModel)]="usuario.name"
              name="name"
            />
          </mat-form-field>
          </div>

          <div class="form-group">
            <mat-form-field>
            <mat-label for="email">Email</mat-label>
            <input
              matInput
              type="email"
              class="form-control"
              id="email"
              required
              [(ngModel)]="usuario.email"
              name="date"
            />
          </mat-form-field>
          </div>

          <div class="form-group">
            <mat-form-field>
            <mat-label for="cpf">cpf</mat-label>
            <input
              matInput
              type="text"
              class="form-control"
              id="cpf"
              required
              [(ngModel)]="usuario.cpf"
              name="cpf"
            />
          </mat-form-field>
          </div>

          <div class="form-group">
            <mat-form-field>
            <mat-label for="dtNascimento">Data de Nascimento</mat-label>
            <input
              matInput
              type="text"
              class="form-control"
              id="dtNascimento"
              required
              [(ngModel)]="usuario.dtNascimento"
              name="dtNascimento"
            />
          </mat-form-field>
          </div>

          <div class="form-group">
            <mat-form-field>
            <mat-label for="ra">RA</mat-label>
            <input
              matInput
              type="number"
              class="form-control"
              id="ra"
              required
              [(ngModel)]="usuario.ra"
              name="ra"
            />
          </mat-form-field>
          </div>

          <div class="form-group">
            <mat-form-field>
            <mat-label for="cursoMatriculado">Curso Matriculado</mat-label>
            <input
              matInput
              type="text"
              class="form-control"
              id="cursoMatriculado"
              required
              [(ngModel)]="usuario.cursoMatriculado"
              name="cursoMatriculado"
            />
          </mat-form-field>
          </div>

          <div class="form-group">
            <mat-form-field>
            <mat-label for="anoIngresso">Ano que Ingressou</mat-label>
            <input
              matInput
              type="text"
              class="form-control"
              id="anoIngresso"
              required
              [(ngModel)]="usuario.anoIngresso"
              name="anoIngresso"
            />
          </mat-form-field>
          </div>

          <div class="form-group">
            <mat-form-field>
            <mat-label for="periodo">Periodo do curso Matriculado</mat-label>
            <input
              matInput
              type="text"
              class="form-control"
              id="periodo"
              required
              [(ngModel)]="usuario.periodo"
              name="periodo"
            />
          </mat-form-field>
          </div>
          <div class="form-group" *ngFor="let perfil of usuario.roles; let i = index;">
            <mat-form-field>
            <mat-label for="periodo">Atualize os Perfis do Usuario</mat-label>
            <input
                matInput
              type="text"
              class="form-control"
              id="periodo"
              required
              [value]="perfil"
              (change)="updateRole($event, i)"
              name="periodo"
            />
          </mat-form-field>
            <button mat-stroked-button type="button" color="  " (click)="remove(i)">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
          <span>Adicione mais Perfis do Usuario</span>
          <form [formGroup]="formRole">
            <button mat-stroked-button type="button" color="primary" (click)="addRoles()">
              <mat-icon>add</mat-icon>
            </button>
            <div formArrayName="roles" fxFlex="100"  fxLayout="column">
              <ng-container *ngFor="let roless of roles.controls; let i=index" >
                <div [formGroupName]="i">
                  <mat-form-field fxFlex="100">
                    <input formControlName="role" matInput type="text" class="form-control" placeholder="Perfil do usuario">
                  </mat-form-field>
                  <button mat-stroked-button type="button" color="primary" (click)="removeDoFormArray(roles, i)">
                    <mat-icon>delete</mat-icon>
                  </button>
                </div>
              </ng-container>
            </div>
          </form>
          <mat-card-actions>
            <button mat-stroked-button type="submit" class="btn btn-success">
              ATUALIZAR
            </button>
          </mat-card-actions>
        </form>
      </div>
    </mat-card>
  </div>
  <app-footer id="footer" class="footer"></app-footer>
</body>
